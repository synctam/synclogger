# 開発方針

本ドキュメントは、Godot SyncLoggerアドオンの開発における品質と一貫性を確保するための方針を定める。

## 1. 基本方針

- **品質第一:** 安定性と信頼性の高いアドオンを目指す。
- **ドキュメント駆動:** 設計とドキュメントを先行させ、実装との乖離を防ぐ。
- **段階的リリース:** Phase 1 (MVP) から始め、機能ごとにマイルストーンを設けて開発を進める。

## 2. テスト駆動開発 (TDD)

本プロジェクトでは、テスト駆動開発 (TDD) を全面的に採用する。テストフレームワークには **GUT (Godot Unit Test)** を使用する。

1.  **Red (失敗するテスト):** 新機能の追加やバグ修正の前に、GUTを使用してその要件を検証するためのテストコードを先に作成する。このテストは、実装が存在しないため必ず失敗する。
2.  **Green (成功するテスト):** テストが成功する最小限のコードを実装する。この段階では、コードの綺麗さよりもテストをパスすることを優先する。
3.  **Refactor (リファクタリング):** テストが成功した状態で、コードの重複をなくし、可読性や設計を改善するリファクタリングを行う。リファクタリング後もGUTのテストが成功することを確認する。

これにより、常に動作するコードベースを維持し、デグレーション（意図しない機能の劣化）を防止し、保守性の高いコードを実現する。

## 3. コーディング規約とツール

### 3.1 スタイルガイド
- **言語:** GDScript
- **スタイルガイド:** [Godot公式のGDScriptスタイルガイド](https://docs.godotengine.org/en/stable/tutorials/scripting/gdscript/style_guide.html) に準拠する。
    - 型ヒント (`-> type`) を可能な限り使用する。
    - クラス、関数、変数名はスネークケース (`snake_case`) を使用する。
    - 定数はパスカルケース (`PASCAL_CASE`) を使用する。
- **コメント:** 複雑なロジックや、そのコードが存在する「理由」を説明するためにコメントを記述する。「何をしているか」はコード自身が説明するように努める。

### 3.2 開発支援アドオン
- **静的解析:** `gdLinter` を使用してコードの品質を保つ。
- **フォーマット:** `GDScript Formatter` を使用して、スタイルガイドに沿ったコードの自動フォーマットを行う。

## 4. Git利用方針

### 4.1 ブランチ戦略

- **`main`:** 常にリリース可能な安定版ブランチ。直接のコミットは禁止。
- **`develop`:** 現在の開発版ブランチ。機能ブランチのマージ先。
- **`feature/issue-name`:** 各機能やタスクごとのブランチ。`develop`から分岐し、完了後に`develop`へPull Requestを送る。 (例: `feature/udp-sender-implementation`)
- **`fix/bug-name`:** バグ修正用のブランチ。

### 4.2 コミットメッセージ

コミットメッセージは、[Conventional Commits](https://www.conventionalcommits.org/ja/v1.0.0/) の規約に従い、**日本語で記述する。**

- **フォーマット:** `<type>(<scope>): <subject>`
- **例:**
    - `feat(sender): UDP送信機能の基本を実装`
    - `fix(plugin): ホットキーがリリースビルドで無効にならない問題を修正`
    - `docs(design): 非同期処理に関する設計を更新`
    - `test(logger): ログレベルフィルタリングのテストケースを追加`

## 5. コードレビュー

- `develop` ブランチへのすべてのマージは、Pull Request (PR) を通じて行う。
- PRは、少なくとも1人以上の他の開発者によるレビューと承認を必須とする。
- レビューでは、設計の妥当性、規約の遵守、テストコードの網羅性を確認する。
